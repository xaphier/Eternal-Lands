<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE boost_serialization>
<boost_serialization signature="serialization::archive" version="9">
<shader_source class_id="0" tracking_level="0" version="1">
	<px class_id="1" tracking_level="1" version="0" object_id="_0">
		<types class_id="2" tracking_level="0" version="0">
			<count>1</count>
			<item_version>0</item_version>
			<item>7</item>
		</types>
		<name class_id="3" tracking_level="0" version="0">
			<str>specular</str>
		</name>
		<datas class_id="4" tracking_level="0" version="0">
			<count>1</count>
			<item_version>0</item_version>
			<item class_id="5" tracking_level="0" version="0">
				<parameters class_id="6" tracking_level="0" version="0">
					<count>7</count>
					<item_version>0</item_version>
					<item class_id="7" tracking_level="0" version="0">
						<source>
							<str>specular_fragment_light</str>
						</source>
						<name>
							<str>diffuse_color</str>
						</name>
						<type>14</type>
						<qualifier>1</qualifier>
						<size>0</size>
						<scale>1</scale>
					</item>
					<item>
						<source>
							<str>specular_fragment_light</str>
						</source>
						<name>
							<str>fragment_normal</str>
						</name>
						<type>14</type>
						<qualifier>0</qualifier>
						<size>0</size>
						<scale>1</scale>
					</item>
					<item>
						<source>
							<str>specular_fragment_light</str>
						</source>
						<name>
							<str>light_color</str>
						</name>
						<type>15</type>
						<qualifier>0</qualifier>
						<size>0</size>
						<scale>1</scale>
					</item>
					<item>
						<source>
							<str>specular_fragment_light</str>
						</source>
						<name>
							<str>light_position</str>
						</name>
						<type>15</type>
						<qualifier>0</qualifier>
						<size>0</size>
						<scale>1</scale>
					</item>
					<item>
						<source>
							<str>specular_fragment_light</str>
						</source>
						<name>
							<str>specular_color</str>
						</name>
						<type>14</type>
						<qualifier>1</qualifier>
						<size>0</size>
						<scale>1</scale>
					</item>
					<item>
						<source>
							<str>specular_fragment_light</str>
						</source>
						<name>
							<str>world_position</str>
						</name>
						<type>14</type>
						<qualifier>0</qualifier>
						<size>0</size>
						<scale>1</scale>
					</item>
					<item>
						<source>
							<str>specular_fragment_light</str>
						</source>
						<name>
							<str>world_view_direction</str>
						</name>
						<type>15</type>
						<qualifier>0</qualifier>
						<size>0</size>
						<scale>1</scale>
					</item>
				</parameters>
				<version>0</version>
				<source>
					<str>vec3 dir, reflect_dir;
float dist, scale, nxdir, diffuse, specular, hxdir;

dir = light_position.xyz - world_position * light_color.a;
dist = dot(dir, dir);
dir *= inversesqrt(dist);
nxdir = max(0.0, dot(fragment_normal, dir));
scale = max(0.0, 1.0 - dist * light_position.w);
diffuse = scale * nxdir;

diffuse_color = vec3(0.0);
specular_color = vec3(0.0);

if (diffuse &gt; 0.0)
{
	reflect_dir = reflect(-dir, fragment_normal);
	hxdir = max(0.0, dot(-world_view_direction.xyz, reflect_dir));
	specular = pow(hxdir, 5) * scale;
	diffuse_color += light_color.rgb * diffuse;
	specular_color += light_color.rgb * specular;
}
</str>
				</source>
			</item>
		</datas>
	</px>
</shader_source>
</boost_serialization>

